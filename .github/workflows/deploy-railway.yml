name: Deploy to Railway

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    name: Railway Deployment Status
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Railway Deployment Info
      run: |
        echo "üöÄ Railway Deployment via GitHub Integration"
        echo "==========================================="
        echo ""
        echo "‚úÖ Deployment Status: ACTIVE via Railway GitHub Integration"
        echo "‚úÖ Architecture: Single-service (Backend + Frontend static files)"
        echo "‚úÖ Docker: Uses Dockerfile.backend (includes frontend files)"
        echo ""
        echo "Your QA Automation Service Hub is automatically deployed to Railway!"
        echo "Every push to main branch triggers an automatic deployment."
        echo ""
        echo "üåê Live URLs:"
        echo "   Dashboard: https://passionate-communication-production-da98.up.railway.app/test-dashboard.html"
        echo "   Health Check: https://passionate-communication-production-da98.up.railway.app/actuator/health"
        echo "   API Base: https://passionate-communication-production-da98.up.railway.app/api/v1/"
        echo ""
        echo "Environment variables configured in Railway dashboard:"
        echo "   - SPRING_PROFILES_ACTIVE=production"
        echo "   - SERVER_PORT=8080"
        echo "   - HF_API_KEY=demo-mode"
        echo ""
        echo "‚úÖ Recent Fixes Applied:"
        echo "   ‚úÖ Fixed API URL configuration (no more localhost issues)"
        echo "   ‚úÖ Single Docker image includes both backend and frontend"
        echo "   ‚úÖ Environment-aware configuration"
        echo "   ‚úÖ CORS properly configured for Railway domains"
        echo ""
        echo "This deployment method provides:"
        echo "‚úÖ Automatic deployments on git push"
        echo "‚úÖ No need for GitHub secrets"
        echo "‚úÖ Full Railway dashboard integration"
        echo "‚úÖ Easy environment variable management"
        echo "‚úÖ Simplified single-service architecture"
        echo ""
        echo "Your Railway project: passionate-communication"
        echo "Project URL: https://railway.app/project/12816f9a-0e5d-4c09-8424-054bdea640bc"